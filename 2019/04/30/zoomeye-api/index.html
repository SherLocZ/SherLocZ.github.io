
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>利用zoomeye API获取查询结果 - Sriracha :)</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="之前写过一个zoomeye的爬虫，使用selenium模拟浏览器来进行爬取数据的，后来发现有zoomeyeAPI参考手册 这个东西，就拿过来看看。要想通过api获取数据，主要包含以下几个步骤：

获,"> 
    <meta name="author" content="sher10ck"> 
    <link rel="alternative" href="atom.xml" title="Sriracha :)" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">
    <link rel="stylesheet" href="/css/obsidian.css">
    <link rel="stylesheet" href="/css/ball-atom.min.css">
</head>
</html>

<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Sriracha :)</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="http://sherlocz.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">利用zoomeye API获取查询结果</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/cover.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="javascript:;"><b>「 </b>文章<b> 」</b></a>
                
                四月 30, 2019
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2019/04/30/zoomeye-api/" title="利用zoomeye API获取查询结果">利用zoomeye API获取查询结果</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    21k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    19 mins.
                </span>
                
                
                
                <span id="busuanzi_container_page_pv">
                    <b class="iconfont icon-read"></b> <i>阅读次数</i>
                    <span id="busuanzi_value_page_pv">0</span>
                </span>
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Python/">Python</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/工具/">工具</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <p>之前写过一个zoomeye的爬虫，使用selenium模拟浏览器来进行爬取数据的，后来发现有<a href="https://www.zoomeye.org/doc#web-search-filters&quot;" target="_blank" rel="noopener">zoomeyeAPI参考手册 </a>这个东西，就拿过来看看。<br><a id="more"></a><br>要想通过api获取数据，主要包含以下几个步骤：</p>
<ul>
<li>获取认证的access_token值</li>
<li>获取查询返回的信息</li>
<li>将返回的信息修改成自己想要的格式存储到文件当中</li>
</ul>
<h1 id="ACCESS-TOKEN"><a href="#ACCESS-TOKEN" class="headerlink" title="ACCESS_TOKEN"></a>ACCESS_TOKEN</h1><p>官方文档是这样写的，要想获取这个token值，将你的账号密码post提交给login的网址，会返回一个字典，这里要注意一下，我们提交的data格式要为json格式，要用到json.dumps函数<br><img src="/2019/04/30/zoomeye-api/access_token.png" alt="access_token"></p>
<figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">url = &quot;https://api.zoomeye.org/user/login&quot;</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">	&quot;username&quot;:&quot;YOUR_USER&quot;,</span><br><span class="line">	&quot;password&quot;:&quot;YOUR_PASS&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">r = requests.post(url,data=json.dumps(data))</span><br><span class="line">print(r.content)</span><br></pre></td></tr></table></div></figure>
<p>返回的结果如下，我们做一个小小的处理：<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;access_token&quot;: &quot;eyJhxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;&#125;</span><br><span class="line">return json.loads(r.text)[&apos;access_token&apos;]</span><br><span class="line">eyJhxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br></pre></td></tr></table></div></figure></p>
<p>文档还说明了我们要设定一个http头:<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">		&quot;Authorization&quot; : &quot;JWT &lt;access_token&gt;&quot; ,</span><br><span class="line">		&quot;Content-Type&quot;: &quot;application/json&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></p>
<h1 id="GET-DATA"><a href="#GET-DATA" class="headerlink" title="GET_DATA"></a>GET_DATA</h1><p>获取到token值之后，解释一下，搜索资源一共有两种<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主机设备搜索：GET /host/search</span><br><span class="line">Web应用搜索：GET /web/search</span><br></pre></td></tr></table></div></figure></p>
<p>我们这里拿最近曝出漏洞的weblogic作为例子：<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.zoomeye.org/web/search?query=weblogic&amp;fact=app,os</span><br></pre></td></tr></table></div></figure></p>
<p>开始查询：<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">url = &quot;https://api.zoomeye.org/web/search?query=weblogic&amp;fact=app,os&quot;</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">		&quot;Authorization&quot; : &quot;JWT &lt;access_token&gt;&quot; ,</span><br><span class="line">		&quot;Content-Type&quot;: &quot;application/json&quot;</span><br><span class="line">&#125;</span><br><span class="line">r = requests.get(url,headers=headers)</span><br><span class="line">page_content = json.loads(r.content)</span><br><span class="line">print(page_content)</span><br></pre></td></tr></table></div></figure></p>
<p>我们分析一下page_content返回过来的json,<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	u &apos;available&apos;: 57, u &apos;matches&apos;: [&#123;</span><br><span class="line">		u &apos;description&apos;: u &apos;zcrab.com,alpha matrix,alpha matrix display,display,LCD,LCD display,dot matrix,visual basic,visual basic component,component,ocx,digit,character,source code,application,DisplayedString, alpha matrix display,vionics, LED, digital, instrumentation, software, technology, dial, graduated, microsoft,  online, download, version, dial, number, representation, data, development, software, control, instruments, virtual instruments, virtual, GUI, graphic, user interface, interface Component, Components, ActiveX, EXE, DLL, VB, Visual Basic, Add-in, Addin, freeware, shareware,retail, Internet, Graphics, Reporting, VBX, OCX, download, resources,games, controls, In process, Out of Process, Stand alone, email, smtp,database, activex, component, components, internet, graphics, reports,SMTP, FTP, ftp, applications, windows, Windows, Windows 98, Windows 95,32-bit, 16-bit, Visual Basic, utilities, education, libraries, code, compression, source, software, multi-media, active, business, retail, free, trial,programming, audio, InnoVision, innovision, active-x, active x, 0-, -o, -0,animation, browser, bar code, tools, HTML, plug-ins, vbscript, scripting, script, collection, NT, nt,.net,activex,addin,addon,asp,bea,business objects,c#,c++,c++builder,cbd,clx,code,com,com+,com +,component,components,compnnent,component,componentsource,control,controls,corba,custom control,dcom,delphi,development tools,dll,download,ejb,gui,it events,it news,j2ee,java,javabeans,jbuilder,libraries,mts,net,objects,ocx,reusable components,reuse software,saveit,save-it,software,tools,ui,vb,vba,vbx,vcl,visual,visual basic,visual studio,weblogic,weblogic workshop,widgets,windows ce,windowsce,xml,build buy reuse sell components&apos;,</span><br><span class="line">		u &apos;language&apos;: [u &apos;PHP&apos;],</span><br><span class="line">		u &apos;title&apos;: u &apos;Zcrab.com - OCX Component - Component software in thailand&apos;,</span><br><span class="line">		u &apos;ip&apos;: [u &apos;203.151.24.12&apos;],</span><br><span class="line">		u &apos;waf&apos;: [],</span><br><span class="line">		u &apos;component&apos;: [&#123;</span><br><span class="line">			u &apos;version&apos;: u &apos;5.2.17&apos;,</span><br><span class="line">			u &apos;name&apos;: u &apos;PHP&apos;,</span><br><span class="line">			u &apos;chinese&apos;: u &apos;PHP&apos;</span><br><span class="line">		&#125;],</span><br><span class="line">		u &apos;system&apos;: [],</span><br><span class="line">		u &apos;site&apos;: u &apos;zcrab.com&apos;,</span><br><span class="line">		u &apos;db&apos;: [],</span><br><span class="line">		u &apos;headers&apos;: u &apos;HTTP/1.1 200 OK\r\nDate: Mon, 29 Apr 2019 20:30:54 GMT\r\nServer: Apache\r\nX-Powered-By: PHP/5.2.17\r\nConnection: close\r\nTransfer-Encoding: chunked\r\nContent-Type: text/html\r\n&apos;,</span><br><span class="line">		u &apos;keywords&apos;: u &apos;zcrab.com,alpha matrix,alpha matrix display,display,LCD,LCD display,dot matrix,visual basic,visual basic component,component,ocx,digit,character,source code,application,DisplayedString, alpha matrix display,vionics, LED, digital, instrumentation, software, technology, dial, graduated, microsoft,  online, download, version, dial, number, representation, data, development, software, control, instruments, virtual instruments, virtual, GUI, graphic, user interface, interface Component, Components, ActiveX, EXE, DLL, VB, Visual Basic, Add-in, Addin, freeware, shareware,retail, Internet, Graphics, Reporting, VBX, OCX, download, resources,games, controls, In process, Out of Process, Stand alone, email, smtp,database, activex, component, components, internet, graphics, reports,SMTP, FTP, ftp, applications, windows, Windows, Windows 98, Windows 95,32-bit, 16-bit, Visual Basic, utilities, education, libraries, code, compression, source, software, multi-media, active, business, retail, free, trial,programming, audio, InnoVision, innovision, active-x, active x, 0-, -o, -0,animation, browser, bar code, tools, HTML, plug-ins, vbscript, scripting, script, collection, NT, nt,.net,activex,addin,addon,asp,bea,business objects,c#,c++,c++builder,cbd,clx,code,com,com+,com +,component,components,compnnent,component,componentsource,control,controls,corba,custom control,dcom,delphi,development tools,dll,download,ejb,gui,it events,it news,j2ee,java,javabeans,jbuilder,libraries,mts,net,objects,ocx,reusable components,reuse software,saveit,save-it,software,tools,ui,vb,vba,vbx,vcl,visual,visual basic,visual studio,weblogic,weblogic workshop,widgets,windows ce,windowsce,xml,build buy reuse sell components&apos;,</span><br><span class="line">		u &apos;framework&apos;: [],</span><br><span class="line">		u &apos;timestamp&apos;: u &apos;2019-04-30T04:42:26.614246&apos;,</span><br><span class="line">		u &apos;geoinfo&apos;: &#123;</span><br><span class="line">			u &apos;city&apos;: &#123;</span><br><span class="line">				u &apos;geoname_id&apos;: 1609350,</span><br><span class="line">				u &apos;names&apos;: &#123;</span><br><span class="line">					u &apos;zh-CN&apos;: u &apos;\u66fc\u8c37&apos;,</span><br><span class="line">					u &apos;en&apos;: u &apos;Bangkok&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			u &apos;country&apos;: &#123;</span><br><span class="line">				u &apos;geoname_id&apos;: 1605651,</span><br><span class="line">				u &apos;code&apos;: u &apos;TH&apos;,</span><br><span class="line">				u &apos;names&apos;: &#123;</span><br><span class="line">					u &apos;zh-CN&apos;: u &apos;\u6cf0\u56fd&apos;,</span><br><span class="line">					u &apos;en&apos;: u &apos;Thailand&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			u &apos;isp&apos;: u &apos;Internet Thailand Company Limited&apos;,</span><br><span class="line">			u &apos;continent&apos;: &#123;</span><br><span class="line">				u &apos;geoname_id&apos;: 6255147,</span><br><span class="line">				u &apos;code&apos;: u &apos;AS&apos;,</span><br><span class="line">				u &apos;names&apos;: &#123;</span><br><span class="line">					u &apos;zh-CN&apos;: u &apos;\u4e9a\u6d32&apos;,</span><br><span class="line">					u &apos;en&apos;: u &apos;Asia&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			u &apos;subdivisions&apos;: &#123;</span><br><span class="line">				u &apos;geoname_id&apos;: 1609348,</span><br><span class="line">				u &apos;code&apos;: u &apos;10&apos;,</span><br><span class="line">				u &apos;names&apos;: &#123;</span><br><span class="line">					u &apos;zh-CN&apos;: u &apos;&apos;,</span><br><span class="line">					u &apos;en&apos;: u &apos;Bangkok&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			u &apos;location&apos;: &#123;</span><br><span class="line">				u &apos;lat&apos;: 13.75,</span><br><span class="line">				u &apos;lon&apos;: 100.5167</span><br><span class="line">			&#125;,</span><br><span class="line">			u &apos;organization&apos;: u &apos;Internet Thailand Company Limited&apos;,</span><br><span class="line">			u &apos;aso&apos;: u &apos;Internet Thailand Company Limited&apos;,</span><br><span class="line">			u &apos;asn&apos;: 4618</span><br><span class="line">		&#125;,</span><br><span class="line">		u &apos;webapp&apos;: [],</span><br><span class="line">		u &apos;server&apos;: [&#123;</span><br><span class="line">			u &apos;version&apos;: None,</span><br><span class="line">			u &apos;name&apos;: u &apos;Apache httpd&apos;,</span><br><span class="line">			u &apos;chinese&apos;: u &apos;Apache httpd&apos;</span><br><span class="line">		&#125;],</span><br><span class="line">		u &apos;domains&apos;: []</span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		u &apos;description&apos;: u &apos;&apos;,</span><br><span class="line">		......</span><br><span class="line">		],</span><br><span class="line">		u &apos;domains&apos;: [u &apos;www.gf-iet.com&apos;, u &apos;down.itsvse.com&apos;, u &apos;www.haocax.com&apos;, u &apos;message&apos;, u &apos;www.v-running.com&apos;, u &apos;tmi.yokogawa.com&apos;, u &apos;www.yibizi.com&apos;, u &apos;blog.ask3.cn&apos;, u &apos;www.51qqt.com&apos;, u &apos;www.xndiguo.com&apos;, u &apos;www.51.la&apos;, u &apos;www.wyzc.com&apos;]</span><br><span class="line">	&#125;], u &apos;facets&apos;: &#123;&#125;, u &apos;total&apos;: 192</span><br></pre></td></tr></table></div></figure></p>
<p>首先这是一个字典，有available(可用)，matches(匹配的)，我们主要是关注这个matches中的信息，每一个matches又是一个列表，列表中有getinfo,language,title,ip等信息，这样我们就能想到如何去处理我们想要的相关信息了。</p>
<p>我们首先来看一下有多少个matches，就是能够获取多少个匹配我们查询的结果</p>
<figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(len(page_content[&apos;matches&apos;]))	//20</span><br></pre></td></tr></table></div></figure>
<p>那么我们明明有大于20个可用的，为什么只返回给了我们20个？<br>这里和zoomeye界面版查询的结果，说明我们api获取的也是一页20个数据，默认从第一页开始，这样我们之前的查询url要添加一个page参数了：<br><img src="/2019/04/30/zoomeye-api/parm.png" alt="parm"><br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.zoomeye.org/web/search?query=weblogic&amp;page=1</span><br></pre></td></tr></table></div></figure></p>
<p>这里我们想要取出我们想要的所有结果，就要计算出总的page数了。</p>
<h1 id="GET-PAGE"><a href="#GET-PAGE" class="headerlink" title="GET_PAGE"></a>GET_PAGE</h1><p>我们新定义一个函数，get_page()</p>
<p>首先我们获取总数：<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">total = int(page_content[&apos;total&apos;])</span><br><span class="line">192</span><br></pre></td></tr></table></div></figure></p>
<p>然后判断我们的page:<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">total = int(page_content[&apos;total&apos;])</span><br><span class="line">page = total / 20</span><br><span class="line">if page % 20 == 0:</span><br><span class="line">    print(page)</span><br><span class="line">print(page+1)</span><br></pre></td></tr></table></div></figure></p>
<p>这样我们这个函数就写好了：<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def get_page(page_content):</span><br><span class="line">    total = int(page_content[&apos;total&apos;])</span><br><span class="line">    page = total / 20</span><br><span class="line">    if page % 20 == 0:</span><br><span class="line">        return(page)</span><br><span class="line">    return(page + 1)</span><br></pre></td></tr></table></div></figure></p>
<h1 id="GET-DATA-1"><a href="#GET-DATA-1" class="headerlink" title="GET_DATA"></a>GET_DATA</h1><p>当我们之前的准备工作都做好了之后，我们就可以从返回的数据中获取我们想要的信息了，我这里就只需要获取ip就行了，其他的照做。<br><figure class="highlight plain"><div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable "><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip = page_content[&apos;matches&apos;][0][&apos;ip&apos;][0].encode(&apos;utf-8&apos;)</span><br></pre></td></tr></table></div></figure></p>
<p>将我们的信息获取到之后，我们就可以写入文件中了。</p>
<h1 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h1><p><a href="https://github.com/SherLocZ/zoomeye_api" target="_blank" rel="noopener">https://github.com/SherLocZ/zoomeye_api</a></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
            </ul>
            
            
            
    <div id='gitalk-container' class="comment link"
        data-ae='true'
        data-ci='ec894e2b66f752e8b7fb'
        data-cs='3ccc2e92bb350688fe2c2dc2930189b62622bfb1'
        data-r='blog-comments'
        data-o='TriDiamond'
        data-a='TriDiamond'
        data-d=''
    >留言</div>


            
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://res.cloudinary.com/tridiamond/image/upload/v1573019751/TriDiamond_logo_ui_xeublz.jpg" height=300 width=300></img>
                    <p>sher10ck</p>
                    <span>Love Sriracha?</span>
                    <dl>
                        <dd><a href="https://github.com/TriDiamond" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://twitter.com/TriDiamond6" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="https://stackoverflow.com/users/7602324/tridiamond?tab=profile" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">87 <p>文章</p></a></li>
                    <li><a href="/categories">0 <p>分类</p></a></li>
                    <li><a href="/tags">27 <p>标签</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>目录</h4>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ACCESS-TOKEN"><span class="toc-number">1.</span> <span class="toc-text">ACCESS_TOKEN</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GET-DATA"><span class="toc-number">2.</span> <span class="toc-text">GET_DATA</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GET-PAGE"><span class="toc-number">3.</span> <span class="toc-text">GET_PAGE</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GET-DATA-1"><span class="toc-number">4.</span> <span class="toc-text">GET_DATA</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CODE"><span class="toc-number">5.</span> <span class="toc-text">CODE</span></a></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2020
        <span class="gradient-text">
            sher10ck
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.3" target="_blank" rel="noopener">v1.4.3</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>



    <link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css">
    <script src="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>



    <script src="/js/busuanzi.min.js"></script>
    <script>
        $(document).ready(function () {
            if ($('span[id^="busuanzi_"]').length) {
                initialBusuanzi();
            }
        });
    </script>


<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-149874671-1');
    </script>





<script>
    function initialTyped () {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ["Love Sriracha?", "喜欢就多加一点 :)"],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>




</html>
